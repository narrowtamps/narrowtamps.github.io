<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      height: 100vh;
      overflow: hidden;
      background-color: #222; /* Dark background so the fish pops */
    }

    #spinningImage {
      position: absolute;
      width: 150px;
      height: auto;
      cursor: pointer;
      /* Initial centering */
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .spin {
      /* The bounce script handles X/Y, this handles the rotation */
      animation: rotation 1s infinite linear;
    }

    @keyframes rotation {
      from { transform: rotate(0deg); }
      to { transform: rotate(359deg); }
    }
  </style>
</head>
<body>

    <img src="fish.gif" id="spinningImage" onclick="toggleAction()">
    <audio id="myAudio" src="oh-naur.mp3"></audio>

    <script>
        const img = document.getElementById("spinningImage");
        const audio = document.getElementById("myAudio");
        
        let x, y; 
        let vx = 5, vy = 5; 
        let isActive = false;

        function toggleAction() {
            isActive = !isActive;
            img.classList.toggle("spin");
            
            if (isActive) {
                audio.play();
                // Set initial X/Y to the current center position before movement starts
                x = img.offsetLeft;
                y = img.offsetTop;
                img.style.transform = 'none'; // Remove CSS centering to let JS take over
            } else {
                audio.pause();
                audio.currentTime = 0;
            }
        }

        function animate() {
            if (isActive) {
                const w = window.innerWidth - img.clientWidth;
                const h = window.innerHeight - img.clientHeight;
                
                x += vx; 
                y += vy;
                
                // Bounce logic
                if (x >= w || x <= 0) vx *= -1;
                if (y >= h || y <= 0) vy *= -1;
                
                img.style.left = x + 'px';
                img.style.top = y + 'px';
            }
            requestAnimationFrame(animate);
        }

        // Start the animation loop
        animate();

        // Optional: Keep it centered if the window is resized before clicking
        window.onresize = () => {
            if (!isActive) {
                img.style.left = '50%';
                img.style.top = '50%';
                img.style.transform = 'translate(-50%, -50%)';
            }
        };
    </script>
</body>
</html>
